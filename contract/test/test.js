const { expect } = require("chai");
const { ethers } = require("hardhat");
const Web3Utils = require('web3-utils');
require('dotenv').config();


// const number = new Web3Utils.BN(0); 
// grid.reverse().forEach((n, i) => number.setn(i, n));

// const number2 = new Web3Utils.BN(0); 
// grid2.reverse().forEach((n, i) => number2.setn(i, n));

describe("svg", async function () {

  it("run two layer", async function () {
    const svgF = await hre.ethers.getContractFactory("Renderer");
    const s = await svgF.deploy();
  
    await s.deployed();
  
    console.log("S -> deployed to:", s.address);

    await s.store( 0,
      [
        '215682144387859885109560000158392704357296514047503851826402060958901',
        
        '113495160187518652357887046427394540778109649156032018159923869571255770415376',
        
        '114458615335068111925400406002890694146136894957349272561245014035095357504',
        
        '68766103483569937662513708549859923285450492847168159137152153767996253588488',
        
        '21707652254501729341814189060312831910816671851240568055151831437276516171775',
        
        '105060702740336674949450205062761313470070461062538888241171392817388038078468',
        
        '90483771983532903410350651096131134977356082598926730204084869447954567845888',
        
        '3618513250813712781840556741640594899713099323876223831232090022539173560320',
        
        '3570242327362256528346628777396278034205535825761063157769186910199972102144',
        
      
        '1973683778179814790934449679809183038147012189679844965797257778561049346',
        
        '1865790672645049829111385181648507797476502342419054634590799887347450005777',
        
        '3619847201169310000537636195435547372432291438586266532023741909509070389504',
        
        '59080187917310571997773614854898290689934687265847019665440174222454720611100',
        
        '14484722787089638624620897340188568784111297597974053460222604832485134041088',
        
        '10617474036067209766761853975571453175553726692720378320591224929257914884',
        
        '61083436779756929259736982906024513812310116245655772117689761365130381412099',
        
        '82320828122681316274862947693816722685102357950503518575583016686035520303104',
        
        '7950855390791510082117091047993063946722441876616019704697862996560445440',
        
        ],
      6,
      'SXNsYW5k'
    );

    await s.store( 1,
      [
        '215682144387859885109560000158392704357296514047503851826402060958901',
        
        '113495160187518652357887046427394540778109649156032018159923869571255770415376',
        
        '114458615335068111925400406002890694146136894957349272561245014035095357504',
        
        '68766103483569937662513708549859923285450492847168159137152153767996253588488',
        
        '21707652254501729341814189060312831910816671851240568055151831437276516171775',
        
        '105060702740336674949450205062761313470070461062538888241171392817388038078468',
        
        '90483771983532903410350651096131134977356082598926730204084869447954567845888',
        
        '3618513250813712781840556741640594899713099323876223831232090022539173560320',
        
        '3570242327362256528346628777396278034205535825761063157769186910199972102144',
        
        
        '1973683778179814790934449679809183038147012189679844965797257778561049346',
        
        '1865790672645049829111385181648507797476502342419054634590799887347450005777',
        
        '3619847201169310000537636195435547372432291438586266532023741909509070389504',
        
        '59080187917310571997773614854898290689934687265847019665440174222454720611100',
        
        '14484722787089638624620897340188568784111297597974053460222604832485134041088',
        
        '10617474036067209766761853975571453175553726692720378320591224929257914884',
        
        '61083436779756929259736982906024513812310116245655772117689761365130381412099',
        
        '82320828122681316274862947693816722685102357950503518575583016686035520303104',
        
        '7950855390791510082117091047993063946722441876616019704697862996560445440',
        
        ],
      6,
      'SXNsYW5k'
    );
    await s.store( 2,
      [
        '215682144387859885109560000158392704357296514047503851826402060958901',
        
        '113495160187518652357887046427394540778109649156032018159923869571255770415376',
        
        '114458615335068111925400406002890694146136894957349272561245014035095357504',
        
        '68766103483569937662513708549859923285450492847168159137152153767996253588488',
        
        '21707652254501729341814189060312831910816671851240568055151831437276516171775',
        
        '105060702740336674949450205062761313470070461062538888241171392817388038078468',
        
        '90483771983532903410350651096131134977356082598926730204084869447954567845888',
        
        '3618513250813712781840556741640594899713099323876223831232090022539173560320',
        
        '3570242327362256528346628777396278034205535825761063157769186910199972102144',
        
        
        '1973683778179814790934449679809183038147012189679844965797257778561049346',
        
        '1865790672645049829111385181648507797476502342419054634590799887347450005777',
        
        '3619847201169310000537636195435547372432291438586266532023741909509070389504',
        
        '59080187917310571997773614854898290689934687265847019665440174222454720611100',
        
        '14484722787089638624620897340188568784111297597974053460222604832485134041088',
        
        '10617474036067209766761853975571453175553726692720378320591224929257914884',
        
        '61083436779756929259736982906024513812310116245655772117689761365130381412099',
        
        '82320828122681316274862947693816722685102357950503518575583016686035520303104',
        
        '7950855390791510082117091047993063946722441876616019704697862996560445440',
        
        ],
      6,
      'SXNsYW5k'
    );


    // const svg64 = await s.tokenSVG(0);
    // const buffer = Buffer.from(svg64, 'base64');

    // console.log('svg',buffer.toString('ascii'))
    
    // const att = await s.getAttributes(0);
    const meta = await s.tokenURI(2);
    
    // console.log(att)
    console.log(meta)
    // const buffer = Buffer.from(meta, 'base64');

    // console.log('meta: ',buffer.toString('ascii'))
  });

});
